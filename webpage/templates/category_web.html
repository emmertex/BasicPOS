{% extends 'layout_web.html' %}

{% block title %}{{ category.name }} - {{ super() }}{% endblock %}

{% block content %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('web_bp.home') }}">Home</a></li>
            <!-- Add parent categories if you have a hierarchy -->
            <li class="breadcrumb-item active" aria-current="page">{{ category.name }}</li>
        </ol>
    </nav>

    <h1>{{ category.name }}</h1>
    
    <div class="product-grid">
        {% for item in items %}
            <div class="product-item">
                <a href="{{ url_for('web_bp.product_page', item_id=item.id) }}">
                    {% set primary_photo = item.photos.filter_by(is_primary=True).first() or item.photos.first() %}
                    {% if primary_photo and primary_photo.image_url %}
                        <img src="{{ get_product_image_url(primary_photo.image_url, size_suffix='_small') }}" alt="{{ item.title }}" style="width:100%; height:180px; object-fit: cover;">
                    {% else %}
                        <img src="{{ url_for('web_bp.static', filename=config.PLACEHOLDER_IMAGE_FILENAME) }}" alt="{{ item.title }}" style="width:100%; height:180px; background-color:#eee; object-fit:cover;">
                    {% endif %}
                    <h3>{{ item.title }}</h3>
                    <p>${{ "%.2f"|format(item.price) }}</p>
                    <!-- Short description or SKU could go here -->
                </a>
            </div>
        {% else %}
            <p>No products in this category currently shown on the website.</p>
        {% endfor %}
    </div>
{% endblock %} 